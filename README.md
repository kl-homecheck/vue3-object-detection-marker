# Vue 3 Object Detection Marker

Vue 3ë¥¼ ìœ„í•œ ê°•ë ¥í•œ ê°ì²´ ê°ì§€ ë§ˆí‚¹ ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤. ë©€í‹° ë ˆì´ì–´ ì§€ì›, ê·¸ë¦¬ë“œ ê¸°ë°˜ ì„ íƒ, í•´ìƒë„ ë…ë¦½ì  ë°ì´í„° ì²˜ë¦¬ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.

## ğŸš€ ë°ëª¨

[ë¼ì´ë¸Œ ë°ëª¨](https://kl-homecheck.github.io/vue3-object-detection-marker/)

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

### ğŸ¨ ë©€í‹° ë ˆì´ì–´ ì‹œìŠ¤í…œ
- **ë‹¤ì¤‘ ìƒ‰ìƒ ë ˆì´ì–´**: ë™ì‹œì— ì—¬ëŸ¬ ìƒ‰ìƒ ë ˆì´ì–´ë¡œ ì‘ì—…
- **ë ˆì´ì–´ ê°€ì‹œì„± ì œì–´**: ê° ë ˆì´ì–´ì˜ í‘œì‹œ/ìˆ¨ê¹€ ì œì–´
- **ë ˆì´ì–´ë³„ íˆ¬ëª…ë„**: ê° ë ˆì´ì–´ì˜ íˆ¬ëª…ë„ ê°œë³„ ì„¤ì •
- **í™œì„± ë ˆì´ì–´ ì „í™˜**: ì‹¤ì‹œê°„ ë ˆì´ì–´ ê°„ ì „í™˜

### ğŸ–±ï¸ ë‹¤ì–‘í•œ ì„ íƒ ëª¨ë“œ
- **í¬ì¸íŠ¸ ëª¨ë“œ**: ê°œë³„ ê·¸ë¦¬ë“œ ì…€ ì„ íƒ
- **ì‚¬ê°í˜• ëª¨ë“œ**: ë“œë˜ê·¸ë¡œ ì˜ì—­ ì„ íƒ
- **ì§€ìš°ê°œ ëª¨ë“œ**: ì„ íƒëœ ì˜ì—­ ì œê±°
- **ë¸ŒëŸ¬ì‹œ ì‹œìŠ¤í…œ**: í¬ê¸° ë° ëª¨ì–‘(ì›í˜•/ì‚¬ê°í˜•) ì¡°ì ˆ ê°€ëŠ¥

### ğŸ“ í•´ìƒë„ ë…ë¦½ì  ì„¤ê³„
- **ë°±ë¶„ìœ¨ ê¸°ë°˜ ì¢Œí‘œ**: ë‹¤ì–‘í•œ í•´ìƒë„ì—ì„œ ì¼ê´€ëœ ê²°ê³¼
- **ì¢…íš¡ë¹„ ìë™ ê³„ì‚°**: ì´ë¯¸ì§€ ë¹„ìœ¨ì— ë”°ë¥¸ ìë™ ê·¸ë¦¬ë“œ ì¡°ì •
- **ìŠ¤ì¼€ì¼ë§ ì§€ì›**: ìº”ë²„ìŠ¤ í¬ê¸° ë³€ê²½ì— ë”°ë¥¸ ìë™ ìŠ¤ì¼€ì¼ë§

### ğŸ“± í„°ì¹˜ ì§€ì›
- **ëª¨ë°”ì¼ í˜¸í™˜**: í„°ì¹˜ ì´ë²¤íŠ¸ ì™„ì „ ì§€ì›
- **íƒœë¸”ë¦¿ ìµœì í™”**: í„°ì¹˜ ë“œë˜ê·¸ ë° ì œìŠ¤ì²˜ ì§€ì›
- **ë°˜ì‘í˜• ë””ìì¸**: ë‹¤ì–‘í•œ í™”ë©´ í¬ê¸° ëŒ€ì‘

### ğŸ“Š ë‹¤ì–‘í•œ ë°ì´í„° í˜•ì‹
- **ê·¸ë¦¬ë“œ ë‚´ë³´ë‚´ê¸°**: ì›ì‹œ ê·¸ë¦¬ë“œ ë°ì´í„° í˜•ì‹
- **ìµœì í™”ëœ ë‚´ë³´ë‚´ê¸°**: ì‚¬ê°í˜•ìœ¼ë¡œ ë³‘í•©ëœ ìµœì í™” í˜•ì‹
- **ë°±ë¶„ìœ¨ ë‚´ë³´ë‚´ê¸°**: í•´ìƒë„ ë…ë¦½ì  ë°±ë¶„ìœ¨ í˜•ì‹
- **ë Œë”ë§ ëª¨ë“œ**: ê·¸ë¦¬ë“œ/ì‚¬ê°í˜• ë Œë”ë§ ëª¨ë“œ ì§€ì›

## ğŸ“¦ ì„¤ì¹˜

```bash
npm install @homecheck/vue3-object-detection-marker
```

## ğŸ› ï¸ ì‚¬ìš©ë²•

### ê¸°ë³¸ ì‚¬ìš©ë²•

```vue
<template>
  <div>
    <!-- ë§ˆí‚¹ ì»´í¬ë„ŒíŠ¸ -->
    <ObjectDetectionMarker
      ref="markerRef"
      :image="imageUrl"
      :canvas-width="800"
      :canvas-height="600"
      :resolution="10"
      selection-mode="point"
      @selection-change="handleSelectionChange"
      @layer-change="handleLayerChange"
    />
    
    <!-- ë¯¸ë¦¬ë³´ê¸° ì»´í¬ë„ŒíŠ¸ -->
    <ObjectDetectionPreview
      :image="imageUrl"
      :selection-data="previewData"
      object-fit-mode="contain"
      render-mode="grid"
    />
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import { ObjectDetectionMarker, ObjectDetectionPreview } from '@homecheck/vue3-object-detection-marker'
import type { GridLayerExport, ExtendedSelectionData, LayerSelectionData } from '@homecheck/vue3-object-detection-marker'

const markerRef = ref()
const imageUrl = ref('your-image-url.jpg')
const previewData = ref<GridLayerExport | null>(null)

const handleSelectionChange = (data: ExtendedSelectionData) => {
  console.log('ì„ íƒ ë³€ê²½:', data)
}

const handleLayerChange = (data: LayerSelectionData) => {
  console.log('ë ˆì´ì–´ ë³€ê²½:', data)
}

const exportData = () => {
  if (markerRef.value) {
    const data = markerRef.value.exportOptimizedLayers()
    previewData.value = data
    console.log('ë‚´ë³´ë‚¸ ë°ì´í„°:', data)
  }
}
</script>
```

### ê³ ê¸‰ ì‚¬ìš©ë²• - ì™¸ë¶€ ì»¨íŠ¸ë¡¤

```vue
<template>
  <div class="marker-container">
    <!-- ì™¸ë¶€ ì»¨íŠ¸ë¡¤ -->
    <div class="controls">
      <!-- ëª¨ë“œ ì „í™˜ -->
      <div class="mode-controls">
        <button @click="switchMode('point')" :class="{ active: currentMode === 'point' }">
          í¬ì¸íŠ¸ ëª¨ë“œ
        </button>
        <button @click="switchMode('rectangle')" :class="{ active: currentMode === 'rectangle' }">
          ì‚¬ê°í˜• ëª¨ë“œ
        </button>
        <button @click="switchMode('eraser')" :class="{ active: currentMode === 'eraser' }">
          ì§€ìš°ê°œ ëª¨ë“œ
        </button>
      </div>
      
      <!-- ë ˆì´ì–´ ì„ íƒ -->
      <div class="layer-controls">
        <button 
          v-for="color in layerColors" 
          :key="color"
          @click="setActiveLayer(color)"
          :class="{ active: activeLayer === color }"
          :style="{ backgroundColor: color }"
        >
          {{ getColorName(color) }}
        </button>
      </div>
      
      <!-- ë¸ŒëŸ¬ì‹œ ì„¤ì • -->
      <div class="brush-controls">
        <label>ë¸ŒëŸ¬ì‹œ í¬ê¸°: {{ brushSize }}</label>
        <input 
          type="range" 
          min="1" 
          max="10" 
          v-model="brushSize" 
          @input="updateBrushSize"
        />
        
        <label>ë¸ŒëŸ¬ì‹œ ëª¨ì–‘:</label>
        <select v-model="brushShape" @change="updateBrushShape">
          <option value="circle">ì›í˜•</option>
          <option value="square">ì‚¬ê°í˜•</option>
        </select>
      </div>
    </div>
    
    <!-- ë§ˆì»¤ ì»´í¬ë„ŒíŠ¸ -->
    <ObjectDetectionMarker
      ref="markerRef"
      :image="imageUrl"
      :canvas-width="800"
      :canvas-height="600"
      :resolution="resolution"
      :layer-colors="layerColors"
      :default-brush-size="brushSize"
      :default-brush-shape="brushShape"
      @layer-change="handleLayerChange"
      @active-layer-change="handleActiveLayerChange"
    />
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import { ObjectDetectionMarker } from '@homecheck/vue3-object-detection-marker'
import type { SelectionMode, BrushShape, LayerSelectionData } from '@homecheck/vue3-object-detection-marker'

const markerRef = ref()
const currentMode = ref<SelectionMode>('point')
const activeLayer = ref('#ff0000')
const brushSize = ref(3)
const brushShape = ref<BrushShape>('circle')
const layerColors = ref(['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff'])

const switchMode = (mode: SelectionMode) => {
  currentMode.value = mode
  markerRef.value?.switchMode(mode)
}

const setActiveLayer = (color: string) => {
  activeLayer.value = color
  markerRef.value?.setActiveColorLayer(color)
}

const updateBrushSize = () => {
  markerRef.value?.setBrushSize(brushSize.value)
}

const updateBrushShape = () => {
  markerRef.value?.setBrushShape(brushShape.value)
}

const getColorName = (color: string) => {
  const names: Record<string, string> = {
    '#ff0000': 'ë¹¨ê°•',
    '#00ff00': 'ì´ˆë¡',
    '#0000ff': 'íŒŒë‘',
    '#ffff00': 'ë…¸ë‘',
    '#ff00ff': 'ë§ˆì  íƒ€'
  }
  return names[color.toLowerCase()] || color
}

const handleLayerChange = (data: LayerSelectionData) => {
  console.log('ë ˆì´ì–´ ë°ì´í„°:', data)
}

const handleActiveLayerChange = (color: string) => {
  activeLayer.value = color
}
</script>
```

## ğŸ“‹ ì»´í¬ë„ŒíŠ¸ API

### ObjectDetectionMarker

ê°ì²´ ê°ì§€ ë§ˆí‚¹ì„ ìœ„í•œ ë©”ì¸ ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤.

#### Props

| ì†ì„± | íƒ€ì… | ê¸°ë³¸ê°’ | ì„¤ëª… |
|------|------|---------|-------------|
| `image` | `string \| File \| Blob` | `''` | ë¡œë“œí•  ì´ë¯¸ì§€ ì†ŒìŠ¤ |
| `canvasWidth` | `number` | `800` | ìº”ë²„ìŠ¤ ë„ˆë¹„ (í”½ì…€) |
| `canvasHeight` | `number` | `600` | ìº”ë²„ìŠ¤ ë†’ì´ (í”½ì…€) |
| `resolution` | `number` | `10` | ê·¸ë¦¬ë“œ í•´ìƒë„ (ì°¨ì›ë‹¹ ì…€ ìˆ˜) |
| `selectionMode` | `'point' \| 'rectangle' \| 'eraser'` | `'point'` | ì´ˆê¸° ì„ íƒ ëª¨ë“œ |
| `layerColors` | `string[]` | `['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff']` | ì‚¬ìš© ê°€ëŠ¥í•œ ë ˆì´ì–´ ìƒ‰ìƒ |
| `defaultBrushSize` | `number` | `3` | ì´ˆê¸° ë¸ŒëŸ¬ì‹œ í¬ê¸° |
| `defaultBrushShape` | `'circle' \| 'square'` | `'circle'` | ì´ˆê¸° ë¸ŒëŸ¬ì‹œ ëª¨ì–‘ |
| `highlightColor` | `string` | `'#007bff'` | ì„ íƒ ì˜ì—­ ê°•ì¡° ìƒ‰ìƒ |
| `gridColor` | `string` | `'#cccccc'` | ê·¸ë¦¬ë“œ ë¼ì¸ ìƒ‰ìƒ |
| `hoverColor` | `string` | `'#6c757d'` | í˜¸ë²„ ìƒíƒœ ìƒ‰ìƒ |
| `backgroundColor` | `string` | `'#ffffff'` | ë°°ê²½ ìƒ‰ìƒ |

#### Events

| ì´ë²¤íŠ¸ | ë§¤ê°œë³€ìˆ˜ | ì„¤ëª… |
|--------|----------|-------------|
| `selectionChange` | `ExtendedSelectionData` | ì„ íƒ ì˜ì—­ ë³€ê²½ ì‹œ ë°œìƒ |
| `modeChange` | `SelectionMode` | ì„ íƒ ëª¨ë“œ ë³€ê²½ ì‹œ ë°œìƒ |
| `imageLoad` | `HTMLImageElement` | ì´ë¯¸ì§€ ë¡œë“œ ì™„ë£Œ ì‹œ ë°œìƒ |
| `imageError` | `Error` | ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨ ì‹œ ë°œìƒ |
| `gridHover` | `GridCell \| null` | ê·¸ë¦¬ë“œ ì…€ í˜¸ë²„ ì‹œ ë°œìƒ |
| `layerChange` | `LayerSelectionData` | ë ˆì´ì–´ ë°ì´í„° ë³€ê²½ ì‹œ ë°œìƒ |
| `activeLayerChange` | `string` | í™œì„± ë ˆì´ì–´ ë³€ê²½ ì‹œ ë°œìƒ |
| `layerVisibilityChange` | `string, boolean` | ë ˆì´ì–´ ê°€ì‹œì„± ë³€ê²½ ì‹œ ë°œìƒ |

#### Methods

| ë©”ì„œë“œ | ë§¤ê°œë³€ìˆ˜ | ë°˜í™˜ê°’ | ì„¤ëª… |
|--------|----------|---------|-------------|
| `exportGridLayers()` | - | `ColorLayerExport` | ì›ì‹œ ê·¸ë¦¬ë“œ ë°ì´í„° ë‚´ë³´ë‚´ê¸° |
| `exportOptimizedLayers()` | - | `GridLayerExport` | ìµœì í™”ëœ ë°ì´í„° ë‚´ë³´ë‚´ê¸° |
| `importGridLayers(data)` | `ColorLayerExport` | `void` | ê·¸ë¦¬ë“œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸° |
| `importOptimizedLayers(data)` | `GridLayerExport` | `void` | ìµœì í™”ëœ ë°ì´í„° ê°€ì ¸ì˜¤ê¸° |
| `switchMode(mode)` | `SelectionMode` | `void` | ì„ íƒ ëª¨ë“œ ë³€ê²½ |
| `setActiveColorLayer(color)` | `string` | `void` | í™œì„± ë ˆì´ì–´ ìƒ‰ìƒ ì„¤ì • |
| `toggleLayerVisibility(color)` | `string` | `void` | ë ˆì´ì–´ ê°€ì‹œì„± í† ê¸€ |
| `setBrushSize(size)` | `number` | `void` | ë¸ŒëŸ¬ì‹œ í¬ê¸° ì„¤ì • |
| `setBrushShape(shape)` | `BrushShape` | `void` | ë¸ŒëŸ¬ì‹œ ëª¨ì–‘ ì„¤ì • |
| `getTotalSelectedCount()` | - | `number` | ì „ì²´ ì„ íƒëœ ì…€ ìˆ˜ ë°˜í™˜ |
| `getActiveLayerCount()` | - | `number` | í™œì„± ë ˆì´ì–´ ì„ íƒëœ ì…€ ìˆ˜ ë°˜í™˜ |

### ObjectDetectionPreview

ì„ íƒëœ ë°ì´í„°ë¥¼ ë¯¸ë¦¬ë³´ê¸°ë¡œ í‘œì‹œí•˜ëŠ” ì½ê¸° ì „ìš© ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤.

#### Props

| ì†ì„± | íƒ€ì… | ê¸°ë³¸ê°’ | ì„¤ëª… |
|------|------|---------|-------------|
| `image` | `string \| File \| Blob` | `''` | í‘œì‹œí•  ì´ë¯¸ì§€ |
| `selectionData` | `GridLayerExport \| null` | `null` | ë Œë”ë§í•  ì„ íƒ ë°ì´í„° |
| `objectFitMode` | `'contain' \| 'cover'` | `'contain'` | ì´ë¯¸ì§€ ë§ì¶¤ ëª¨ë“œ |
| `renderMode` | `'grid' \| 'rect'` | `'grid'` | ë Œë”ë§ ëª¨ë“œ |
| `canvasWidth` | `number` | `auto` | ìº”ë²„ìŠ¤ ë„ˆë¹„ |
| `canvasHeight` | `number` | `auto` | ìº”ë²„ìŠ¤ ë†’ì´ |
| `backgroundColor` | `string` | `'#f8f9fa'` | ë°°ê²½ ìƒ‰ìƒ |
| `layerColors` | `Record<string, {color: string, opacity: number}>` | `{}` | ë ˆì´ì–´ë³„ ìƒ‰ìƒ ë° íˆ¬ëª…ë„ ì„¤ì • |

#### ë Œë”ë§ ëª¨ë“œ

- **`grid`**: ê°œë³„ ê·¸ë¦¬ë“œ ì…€ë“¤ì„ ëª¨ë‘ ë Œë”ë§
- **`rect`**: ê° ë ˆì´ì–´ì˜ ëª¨ë“  ì…€ì„ í¬í•¨í•˜ëŠ” ë‹¨ì¼ ê²½ê³„ ì‚¬ê°í˜•ìœ¼ë¡œ ë Œë”ë§

## ğŸ”§ í—¬í¼ í•¨ìˆ˜

### ê·¸ë¦¬ë“œ ë³€í™˜ í•¨ìˆ˜

```typescript
import { 
  convertGridLayerToRenderRects,
  getBoundingRectangle,
  convertGridRectsToPercentRects,
  convertPercentRectsToPixelRects
} from '@homecheck/vue3-object-detection-marker'
```

#### `convertGridLayerToRenderRects(data, renderMode)`

GridLayerExport ë°ì´í„°ë¥¼ ë Œë”ë§ ëª¨ë“œì— ë§ê²Œ ë³€í™˜í•©ë‹ˆë‹¤.

```typescript
const renderRects = convertGridLayerToRenderRects(gridData, 'rect')
// 'grid' ëª¨ë“œ: ì›ë³¸ ì‚¬ê°í˜•ë“¤ ë°˜í™˜
// 'rect' ëª¨ë“œ: ê° ë ˆì´ì–´ë¥¼ ë‹¨ì¼ ê²½ê³„ ì‚¬ê°í˜•ìœ¼ë¡œ ë³‘í•©
```

#### `getBoundingRectangle(rects)`

ì£¼ì–´ì§„ ì‚¬ê°í˜•ë“¤ì„ ëª¨ë‘ í¬í•¨í•˜ëŠ” ê²½ê³„ ì‚¬ê°í˜•ì„ ê³„ì‚°í•©ë‹ˆë‹¤.

```typescript
const boundingRect = getBoundingRectangle([
  { x: 10, y: 10, width: 20, height: 20 },
  { x: 40, y: 40, width: 30, height: 30 }
])
// ê²°ê³¼: { x: 10, y: 10, width: 60, height: 60 }
```

#### `convertGridRectsToPercentRects(rects, gridCols, gridRows)`

ê·¸ë¦¬ë“œ ê¸°ë°˜ ì‚¬ê°í˜•ì„ ë°±ë¶„ìœ¨ ê¸°ë°˜ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.

```typescript
const percentRects = convertGridRectsToPercentRects(
  [{ x: 5, y: 5, width: 10, height: 10 }],
  100, // ì´ ì—´ ìˆ˜
  100  // ì´ í–‰ ìˆ˜
)
// ê²°ê³¼: [{ x: 0.05, y: 0.05, width: 0.1, height: 0.1 }]
```

#### `convertPercentRectsToPixelRects(percentRects, canvasWidth, canvasHeight)`

ë°±ë¶„ìœ¨ ê¸°ë°˜ ì‚¬ê°í˜•ì„ í”½ì…€ ê¸°ë°˜ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.

```typescript
const pixelRects = convertPercentRectsToPixelRects(
  [{ x: 0.1, y: 0.1, width: 0.2, height: 0.2 }],
  800, // ìº”ë²„ìŠ¤ ë„ˆë¹„
  600  // ìº”ë²„ìŠ¤ ë†’ì´
)
// ê²°ê³¼: [{ x: 80, y: 60, width: 160, height: 120 }]
```

### ê·¸ë¦¬ë“œ ê³„ì‚° í•¨ìˆ˜

```typescript
import { 
  calculateGridFromResolution,
  screenToGridResolution,
  gridToScreenResolution,
  mergeGridsToRects
} from '@homecheck/vue3-object-detection-marker'
```

#### `calculateGridFromResolution(imageWidth, imageHeight, canvasWidth, canvasHeight, resolution)`

í•´ìƒë„ ê¸°ë°˜ ê·¸ë¦¬ë“œ ì‹œìŠ¤í…œì˜ ì „ì²´ ê³„ì‚°ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

```typescript
const gridCalc = calculateGridFromResolution(1920, 1080, 800, 600, 10)
// ê²°ê³¼: {
//   aspectRatio: { width: 16, height: 9 },
//   gridDimensions: { cols: 160, rows: 90 },
//   cellSize: { width: 5, height: 6.67 }
// }
```

#### `screenToGridResolution(screenX, screenY, cellWidth, cellHeight, gridCols, gridRows)`

í™”ë©´ ì¢Œí‘œë¥¼ ê·¸ë¦¬ë“œ ì¢Œí‘œë¡œ ë³€í™˜í•©ë‹ˆë‹¤.

```typescript
const gridCell = screenToGridResolution(100, 150, 5, 6.67, 160, 90)
// ê²°ê³¼: { row: 22, col: 20 }
```

#### `mergeGridsToRects(selectedGrids, totalCols, totalRows)`

ì„ íƒëœ ê·¸ë¦¬ë“œ ì…€ë“¤ì„ ìµœì†Œí•œì˜ ì‚¬ê°í˜•ìœ¼ë¡œ ë³‘í•©í•©ë‹ˆë‹¤.

```typescript
const selectedGrids = new Set(['0,0', '0,1', '1,0', '1,1'])
const rects = mergeGridsToRects(selectedGrids, 100, 100)
// ê²°ê³¼: [{ x: 0, y: 0, width: 2, height: 2 }]
```

## ğŸ“Š ë°ì´í„° í˜•ì‹

### GridLayerExport

ìµœì í™”ëœ ë‚´ë³´ë‚´ê¸° í˜•ì‹ì…ë‹ˆë‹¤.

```typescript
interface GridLayerExport {
  metadata: {
    cols: number        // ê·¸ë¦¬ë“œ ì—´ ìˆ˜
    rows: number        // ê·¸ë¦¬ë“œ í–‰ ìˆ˜
  }
  layers: Record<string, Rectangle[]>  // ìƒ‰ìƒë³„ ì‚¬ê°í˜• ë°°ì—´
}

interface Rectangle {
  x: number           // ì‹œì‘ ì—´ ìœ„ì¹˜
  y: number           // ì‹œì‘ í–‰ ìœ„ì¹˜
  width: number       // ë„ˆë¹„ (ì…€ ë‹¨ìœ„)
  height: number      // ë†’ì´ (ì…€ ë‹¨ìœ„)
}
```

### ColorLayerExport

ì›ì‹œ ê·¸ë¦¬ë“œ ë°ì´í„° í˜•ì‹ì…ë‹ˆë‹¤.

```typescript
interface ColorLayerExport {
  imageSize: { width: number; height: number }
  resolution: number
  layers: Record<string, string[]>  // ìƒ‰ìƒë³„ ê·¸ë¦¬ë“œ í‚¤ ë°°ì—´
}
```

### PercentRect

í•´ìƒë„ ë…ë¦½ì  ë°±ë¶„ìœ¨ ì‚¬ê°í˜•ì…ë‹ˆë‹¤.

```typescript
interface PercentRect {
  x: number      // 0-1 (0% - 100%)
  y: number      // 0-1 (0% - 100%)
  width: number  // 0-1 (0% - 100%)
  height: number // 0-1 (0% - 100%)
}
```

### ExtendedSelectionData

ì„ íƒ ë³€ê²½ ì´ë²¤íŠ¸ ë°ì´í„°ì…ë‹ˆë‹¤.

```typescript
interface ExtendedSelectionData {
  selectedCells: GridCell[]
  resolution: number
  imageAspectRatio: { width: number; height: number }
  gridDimensions: { cols: number; rows: number }
  cellSize: { width: number; height: number }
  imageWidth: number
  imageHeight: number
  canvasWidth: number
  canvasHeight: number
  layerData?: LayerSelectionData
}
```

### LayerSelectionData

ë ˆì´ì–´ ì •ë³´ ë°ì´í„°ì…ë‹ˆë‹¤.

```typescript
interface LayerSelectionData {
  activeColor: string
  layers: Array<{
    color: string
    selectedCount: number
    visible: boolean
    name?: string
  }>
  totalSelected: number
}
```

## ğŸ¨ ìŠ¤íƒ€ì¼ë§

ì»´í¬ë„ŒíŠ¸ëŠ” scoped CSSë¥¼ ì‚¬ìš©í•˜ë©° CSS ë³€ìˆ˜ ì¬ì •ì˜ë‚˜ deep ì„ íƒìë¥¼ í†µí•´ ì»¤ìŠ¤í„°ë§ˆì´ì§•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```css
/* ìº”ë²„ìŠ¤ í…Œë‘ë¦¬ ì»¤ìŠ¤í„°ë§ˆì´ì§• */
:deep(.marker-canvas) {
  border: 2px solid #007bff;
  border-radius: 8px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

/* ë¡œë”© ì¸ë””ì¼€ì´í„° ì»¤ìŠ¤í„°ë§ˆì´ì§• */
:deep(.loading-indicator) {
  background: rgba(0, 123, 255, 0.9);
  color: white;
  font-weight: bold;
}

/* ì—ëŸ¬ ë©”ì‹œì§€ ì»¤ìŠ¤í„°ë§ˆì´ì§• */
:deep(.error-message) {
  background: rgba(220, 53, 69, 0.9);
  color: white;
  border-radius: 4px;
}

/* ë¯¸ë¦¬ë³´ê¸° ì»´í¬ë„ŒíŠ¸ ìŠ¤íƒ€ì¼ë§ */
:deep(.preview-canvas) {
  border: 1px solid #dee2e6;
  border-radius: 4px;
}
```

## ğŸ”„ ì‹¤ì‹œê°„ ë°ì´í„° ë™ê¸°í™”

ë§ˆí‚¹ ì»´í¬ë„ŒíŠ¸ì™€ ë¯¸ë¦¬ë³´ê¸° ì»´í¬ë„ŒíŠ¸ ê°„ ì‹¤ì‹œê°„ ë™ê¸°í™” ì˜ˆì œ:

```vue
<template>
  <div class="sync-container">
    <div class="marker-section">
      <ObjectDetectionMarker
        ref="markerRef"
        :image="imageUrl"
        @selection-change="handleSelectionChange"
        @layer-change="handleLayerChange"
      />
    </div>
    
    <div class="preview-section">
      <ObjectDetectionPreview
        :image="imageUrl"
        :selection-data="previewData"
        :render-mode="renderMode"
      />
      
      <!-- í—¬í¼ í•¨ìˆ˜ í™œìš© ì •ë³´ í‘œì‹œ -->
      <div class="helper-info">
        <h4>ë³€í™˜ëœ ë Œë”ë§ ë°ì´í„°:</h4>
        <pre>{{ JSON.stringify(convertedRects, null, 2) }}</pre>
        
        <h4>ê²½ê³„ ì‚¬ê°í˜• ì •ë³´:</h4>
        <div v-for="(info, color) in boundingInfo" :key="color">
          <span :style="{ color }">{{ color }}</span>: 
          {{ info.rectCount }}ê°œ ì‚¬ê°í˜• â†’ 
          ê²½ê³„ í¬ê¸°: {{ info.boundingRect.width }}Ã—{{ info.boundingRect.height }}
        </div>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, computed } from 'vue'
import { 
  ObjectDetectionMarker, 
  ObjectDetectionPreview,
  convertGridLayerToRenderRects,
  getBoundingRectangle
} from '@homecheck/vue3-object-detection-marker'

const markerRef = ref()
const previewData = ref(null)
const renderMode = ref('grid')

// ì‹¤ì‹œê°„ ë³€í™˜ëœ ë°ì´í„°
const convertedRects = computed(() => {
  if (!previewData.value) return {}
  return convertGridLayerToRenderRects(previewData.value, renderMode.value)
})

// ê²½ê³„ ì‚¬ê°í˜• ì •ë³´
const boundingInfo = computed(() => {
  if (!previewData.value) return {}
  const result = {}
  
  Object.entries(previewData.value.layers).forEach(([color, rects]) => {
    if (rects.length > 0) {
      result[color] = {
        rectCount: rects.length,
        boundingRect: getBoundingRectangle(rects)
      }
    }
  })
  
  return result
})

const handleSelectionChange = () => {
  // ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸
  if (markerRef.value) {
    previewData.value = markerRef.value.exportOptimizedLayers()
  }
}

const handleLayerChange = (layerData) => {
  console.log('ë ˆì´ì–´ ë³€ê²½:', layerData)
  // í•„ìš”ì‹œ ì¶”ê°€ ì²˜ë¦¬
}
</script>
```

## ğŸš€ ì„±ëŠ¥ ìµœì í™”

### ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬

```typescript
// ëŒ€ìš©ëŸ‰ ì„ íƒ ë°ì´í„° ìµœì í™”
const optimizeSelection = () => {
  if (markerRef.value) {
    // ì›ì‹œ ë°ì´í„° ëŒ€ì‹  ìµœì í™”ëœ ë°ì´í„° ì‚¬ìš©
    const optimizedData = markerRef.value.exportOptimizedLayers()
    
    // ë°±ë¶„ìœ¨ ë³€í™˜ìœ¼ë¡œ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ê°ì†Œ
    const percentData = convertGridRectsToPercentRects(
      optimizedData.layers['#ff0000'] || [],
      optimizedData.metadata.cols,
      optimizedData.metadata.rows
    )
    
    console.log('ìµœì í™”ëœ ë°ì´í„°:', percentData)
  }
}
```

### ì´ë²¤íŠ¸ ìµœì í™”

```typescript
import { debounce } from '@homecheck/vue3-object-detection-marker'

// ì„ íƒ ë³€ê²½ ì´ë²¤íŠ¸ ë””ë°”ìš´ì‹±
const debouncedSelectionChange = debounce((data) => {
  // ì‹¤ì œ ì²˜ë¦¬ ë¡œì§
  updatePreview(data)
}, 100)
```

## ğŸ¤ ê¸°ì—¬í•˜ê¸°

ê¸°ì—¬ë¥¼ í™˜ì˜í•©ë‹ˆë‹¤! Pull Requestë¥¼ ììœ ë¡­ê²Œ ì œì¶œí•´ ì£¼ì„¸ìš”.

## ğŸ“„ ë¼ì´ì„ ìŠ¤

MIT License - ìì„¸í•œ ë‚´ìš©ì€ [LICENSE](LICENSE) íŒŒì¼ì„ ì°¸ì¡°í•˜ì„¸ìš”.

## ğŸ”— ë§í¬

- [GitHub ì €ì¥ì†Œ](https://github.com/kl-homecheck/vue3-object-detection-marker)
- [ë¼ì´ë¸Œ ë°ëª¨](https://kl-homecheck.github.io/vue3-object-detection-marker/)
- [NPM íŒ¨í‚¤ì§€](https://www.npmjs.com/package/@homecheck/vue3-object-detection-marker)

## ğŸ“ ë³€ê²½ ë¡œê·¸

### v1.0.0-rc.1
- ì´ˆê¸° ë¦´ë¦¬ìŠ¤
- ë©€í‹° ë ˆì´ì–´ ì‹œìŠ¤í…œ êµ¬í˜„
- ë¸ŒëŸ¬ì‹œ ì‹œìŠ¤í…œ ì¶”ê°€
- í—¬í¼ í•¨ìˆ˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì œê³µ
- TypeScript ì™„ì „ ì§€ì›
- í„°ì¹˜ ì´ë²¤íŠ¸ ì§€ì›
- í•´ìƒë„ ë…ë¦½ì  ë°ì´í„° ì²˜ë¦¬ 